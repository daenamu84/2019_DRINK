<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Product">
    
    
    <update id="productInsert">
    	<![CDATA[
		INSERT INTO T_PROD_M
			(BRAND_ID, SUB_BRAND_ID, PROD_ML_CD, USE_YN, DATA_REG_DTM, DATA_REG_ID, DATA_UPD_DTM, DATA_UPD_ID) 
			VALUES (#{brandId}, #{subBrandId}, #{prodMlCd}, #{useYn}, now(), '0', now(), '0')    	
    	]]>
    </update>
    
    
    <select id="getProductList" resultType="DataMap">
    	<![CDATA[
    		SELECT P.PROD_NO, P.BRAND_ID, B.BRAND_NM, SB.SUB_BRAND_ID, SB.SUB_BRAND_NM, P.PROD_ML_CD, SB.LIQ_KD_CD, B.ORCO_BRAND_YN, P.USE_YN
			FROM T_PROD_M P, T_BRAND_M B, T_SUB_BRAND_M SB
			WHERE P.BRAND_ID = B.BRAND_ID
			AND P.SUB_BRAND_ID = SB.SUB_BRAND_ID
			AND B.BRAND_ID = SB.BRAND_ID
			AND B.BRAND_ID IN
       	]]>
			<foreach collection="brandId" item="var" open="(" close=")" separator=",">#{var}</foreach>
    </select>

    <select id="getProductDetail" resultType="DataMap">
    	<![CDATA[
    		SELECT P.PROD_NO, P.BRAND_ID, B.BRAND_NM, SB.SUB_BRAND_ID, SB.SUB_BRAND_NM, P.PROD_ML_CD, SB.LIQ_KD_CD, B.ORCO_BRAND_YN, P.USE_YN
			FROM T_PROD_M P, T_BRAND_M B, T_SUB_BRAND_M SB
			WHERE P.BRAND_ID = B.BRAND_ID
			AND P.SUB_BRAND_ID = SB.SUB_BRAND_ID
			AND B.BRAND_ID = SB.BRAND_ID
			AND P.PROD_NO = #{prodNo}
			LIMIT 1
       	]]>
    </select>
    
    <update id="productUpdate">
    	<![CDATA[
		UPDATE T_PROD_M
			SET PROD_ML_CD = #{prodMlCd},
				  USE_YN = #{useYn},
				  DATA_UPD_DTM = NOW(),
    			  DATA_UPD_ID = '1'
		   WHERE PROD_NO = #{prodNo}
    	]]>
    </update>
</mapper>