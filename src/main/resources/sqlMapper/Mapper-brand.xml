<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Brand">
      
    <select id="getBrandList" resultType="DataMap">
    	<![CDATA[
    		SELECT 
				BRAND_ID, BRAND_NM, ORCO_BRAND_YN, IF(ORCO_BRAND_YN = 'Y', "자사","경쟁사") ORCO_BRAND_NM, SORT_ORD, USE_YN
			 FROM T_BRAND_M
       	]]>
    </select>
    
    <update id="masterUpdate">
    	<![CDATA[
    		UPDATE FROM  T_BRAND_M
    			SET BRAND_NM =   #{brandNm},
    				  ORCO_BRAND_YN = #{orcoBrandYn},
    				  SORT_ORD = #{sortOrd},
    				  USE_YN = #{useYn},
    				  DATA_UPD_DTM = NOW(),
    				  DATA_UPD_ID = '1'
    	    WHERE BRAND_ID = #{brandId}
    	]]>
    </update>
    
    <update id="masterInsert">
    	<![CDATA[
    	INSERT INTO T_BRAND_M
			(BRAND_ID, BRAND_NM, ORCO_BRAND_YN, SORT_ORD, USE_YN, DATA_REG_DTM, DATA_REG_ID, DATA_UPD_DTM, DATA_UPD_ID) 
			VALUES ( (select COALESCE(count(brand_id),0)+1 from T_BRAND_M a), #{brandNm}, #{orcoBrandYn}, #{sortOrd}, #{useYn}, now(), '0', now(), '0')
    	]]>
    </update>
    
</mapper>